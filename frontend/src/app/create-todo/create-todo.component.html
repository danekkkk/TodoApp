<form
  [formGroup]="createTodo"
  class="d-flex align-items-center min-vh-100"
  autocomplete="false"
>
  <div class="col-6 mx-auto">
    <h3>Create new todo</h3>
    <div formGroupName="details">
      <div>
        <label for="title">Title</label>
        <input
          id="title"
          type="text"
          formControlName="title"
          class="form-control"
          [ngClass]="{
            'border-danger': title?.invalid && (title?.dirty || title?.touched)
          }"
          (input)="resetError()"
        />
        <div *ngIf="title?.invalid && (title?.dirty || title?.touched)">
          <small class="text-danger" *ngIf="title?.errors?.['required']"
            >Title is required.</small
          >
          <small class="text-danger" *ngIf="title?.errors?.['maxlength']"
            >Title cannot be longer than
            {{title?.errors?.['maxlength'].requiredLength}} characters.</small
          >
        </div>
      </div>
      <div>
        <label for="description">Description</label>
        <textarea
          id="description"
          formControlName="description"
          class="form-control"
          [ngClass]="{
            'border-danger':
              description?.invalid &&
              (description?.dirty || description?.touched)
          }"
          (input)="resetError()"
        >
        </textarea>
        <div
          *ngIf="
            description?.invalid && (description?.dirty || description?.touched)
          "
        >
          <small class="text-danger" *ngIf="description?.errors?.['required']"
            >Description is required.</small
          >
          <small class="text-danger" *ngIf="description?.errors?.['minlength']"
            >Description must be longer than
            {{description?.errors?.['minlength'].requiredLength}}
            characters.</small
          >
        </div>
      </div>
      <div>
        <input
          id="isImportant"
          type="checkbox"
          formControlName="isImportant"
          (input)="resetError()"
          class="me-2"
        />
        <label for="isImportant">Important</label>
      </div>
    </div>
    <div>
      <label for="deadline">Deadline</label>
      <input
        id="deadline"
        formControlName="deadline"
        class="form-control"
        type="date"
        [min]="today"
        [ngClass]="{
          'border-danger':
            deadline?.invalid && (deadline?.dirty || deadline?.touched)
        }"
        (input)="resetError()"
      />
      <div *ngIf="deadline?.invalid && (deadline?.dirty || deadline?.touched)">
        <small class="text-danger" *ngIf="deadline?.errors?.['required']"
          >Deadline is required.</small
        >
      </div>
    </div>

    <p *ngIf="error" class="text-danger">{{ error }}</p>

    <div>
      <button
        class="btn btn-dark w-100"
        (click)="onSubmit()"
        [disabled]="createTodo.invalid"
      >
        Create task
      </button>

    </div>
  </div>
</form>
